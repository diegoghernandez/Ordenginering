---
import { EmailForm, type EmailFormTraduction } from '@/components/customer/EmailForm'
import LinksContainer from '@/components/customer/LinksContainer.astro'
import { PasswordForm, type PasswordFormTraduction } from '@/components/customer/PasswordForm'
import { ProfileForm, type ProfileFormTraduction } from '@/components/customer/ProfileForm'
import FormLayout from '@/layouts/FormLayout.astro'
import type { Customer, CustomerRole, SeoTraduction } from '@/types'
import { getProfileLinks } from '@/utils/getProfileLinks'

interface Props {
   customer: Customer
   customerRole: CustomerRole
   t: {
      seo: SeoTraduction
      profileFormTraduction: ProfileFormTraduction
      passwordFormTraduction: PasswordFormTraduction
      emailFormTraduction: EmailFormTraduction
   }
}

const { customer, customerRole, t } = Astro.props
---

<FormLayout 
   title={t.seo.title}
   description={t.seo.description}
   activeLink='Account'
>
   <LinksContainer links={getProfileLinks({
      customerId: customerRole.id,
      desireTranslation: Astro.currentLocale,
      role: customerRole.role, 
      active: 'PROFILE'
   })} />
   <ProfileForm 
      client:load
      name={customer.customerName}
      birthDate={customer.birthDate}
      t={t.profileFormTraduction}
   />
   <PasswordForm client:load t={t.passwordFormTraduction} />
   <EmailForm client:load email={customer.email} t={t.emailFormTraduction} />
</FormLayout>